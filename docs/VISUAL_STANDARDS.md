# Fraym Visual Standards

This document defines Fraym's visual design standards for data visualizations, including color palettes, chart specifications, and styling guidelines.

## Color Palette

### PRIMARY PALETTE

- **Dark Blue**: #00162b
- **Electric Blue**: #202da5
- **Teal**: #196160
- **Aqua**: #1dd8b0
- **Bright Green**: #94d931

### NEUTRAL PALETTE

- **Charcoal**: #393e50
- **Dark Gray**: #696b78
- **Gray**: #d6d9dd
- **Pale Gray**: #f2f2f2
- **Dark Sand**: #8f9092
- **Sand**: #d8d5ca
- **Pale Sand**: #efeee8

### EXTENDED PALETTE

- **Purple**: #7152e2
- **Dark Red**: #5b2036
- **Red**: #d44244
- **Orange**: #e8b934
- **Yellow**: #efeb6a
- **Dark Green**: #237d07

## Color Ramps

Maps generated by Fraym should be styled with one of the color ramps noted on this page. Color ramps (also called gradients) have been designed to provide flexibility when visualizing the map data while still matching the overall color palette of the Fraym brand. The Colorblind-Friendly ramp is designed to maintain legible contrast for readers with deuteranopia and protanopia colorblindness.

**NOTE:** Grayscale should only be used in scenarios where color is not available to display a map. For example, in black and white documents that will be printed and/or faxed. Do not use the Grayscale ramp in any scenario that color is otherwise available.

### Sequential Ramps

**Hello Darkness:**
```
#f2f2f2 → #1dd3b0 → #196160
```

**Magma:**
```
#0b162b → #7152e2 → #d44244 → #e8b934 → #efe6ba
```

**Go Green:**
```
#f2f2f2 → #94d931 → #257d07
```

**Off-Grid:**
```
#efe6ba → #94d931 → #1dd3b0 → #2024a5 → #196160 → #0b162b
```

**Candy Floss:**
```
#f2f2f2 → #2024a5
```

**Grayscale (SEE NOTE):**
```
#ffffff → #000000
```

**Candy Apple:**
```
#efeee8 → #d44244 → #3b2036
```

**Population Blues:**
```
#f2f2f2 → #1dd3b0 → #196160 → #2024a5
```

### Divergent Ramps

**Sunshine:**
```
#196160 → #f2f2f2 → #efe6ba
```

**Polar:**
```
#1dd3b0 → #f2f2f2 → #7152e2
```

**Peach Rings:**
```
#efeee8 → #efe6ba → #e8b934 → #d44244
```

**Hot and Cold:**
```
#d44244 → #393e80 → #1dd3b0
```

**Concord:**
```
#f2f2f2 → #7152e2 → #3b2036
```

**Colorblind-Friendly:**
```
#2024a5 → #f2f2f2 → #d44244
```

## Chart Types and Specifications

### Choropleth Maps

- Show geographic variation in a single indicator across geographic units
- Use diverging color schemes for indicators with meaningful center point
- Use sequential schemes for count or rate data
- Always include legends with clear labels
- Include scale bar and north arrow for formal publications

**Best Practices:**
- Choose appropriate color ramp based on data type
- Ensure sufficient contrast between categories
- Avoid too many categories (5-7 maximum for choropleth)
- Consider colorblind accessibility

### Raster Maps

- Show geographic variation in a single indicator at 1 square kilometer level
- Use diverging color schemes for indicators with meaningful center point
- Use sequential schemes for count or rate data
- Always include legends with clear labels
- Include scale bar and north arrow for formal publications
- Often requires a zoom in to show meaning (but not always)

**Best Practices:**
- Use appropriate resolution for the analysis scale
- Consider aggregation when showing large areas
- Include context layers (boundaries, labels) as needed
- Use continuous color scales for continuous data

### Bar Charts

- Compare values across categories
- Sort by value (descending) unless natural order exists
- Use horizontal bars for long category names
- Include data labels for key values
- **NO error bars** unless explicitly requested
- **Narrow bars with gaps** between them (width = 0.7 or less)
- **NO vertical text** - use subtitle instead of rotated y-axis titles
- **NO coord_flip() y-axis titles** - include context in subtitle

**Example Specification:**
```r
ggplot(data, aes(x = reorder(category, -value), y = value)) +
  geom_col(width = 0.7, fill = FRAYM_COLORS$electric_blue) +
  labs(
    title = "Clear, Descriptive Title",
    subtitle = "Context about what is being measured",
    x = NULL,  # Remove or keep simple
    y = NULL   # Use subtitle for units/context
  ) +
  theme_minimal()
```

### Line Charts

- Show trends over time
- Use distinct colors for multiple series
- Include markers for data points
- Add reference lines for targets or thresholds

**Best Practices:**
- Use consistent line widths (0.8-1.2)
- Add data labels at key points
- Include clear legend for multiple series
- Use grid lines sparingly

### Tables

- Round to appropriate precision (usually 1-2 decimal places)
- Include sample sizes or confidence intervals where relevant
- Use clear column headers
- Apply conditional formatting for emphasis

**Best Practices:**
- Align numbers to the right
- Align text to the left
- Use consistent decimal places within columns
- Highlight totals or key rows

## General Styling Guidelines

### Typography

- Use clean, sans-serif fonts (Arial, Helvetica, or similar)
- Title: Bold, larger size (14-16pt)
- Subtitle: Regular weight, medium size (10-12pt)
- Axis labels: Regular weight, smaller size (8-10pt)
- Data labels: As needed, 8-10pt

### Layout

- Maintain consistent margins and spacing
- Align elements to a grid when possible
- Use white space effectively
- Ensure all text is horizontal (no rotated labels)

### Legends

- Position: Top-right or bottom for maps; right side for charts
- Clear, concise labels
- Include units where applicable
- Use same color scheme as visualization

### Titles and Labels

- Title: Clear statement of what is shown
- Subtitle: Additional context, units, time period
- Caption: Data source, notes, disclaimers
- Axis labels: Clear and concise

## Color Selection Guidelines

### When to Use Sequential Palettes

Use sequential palettes when visualizing:
- Counts (number of people, facilities, etc.)
- Rates or proportions (0-100%)
- Intensity measures (low to high)
- Single-direction scales

**Recommended palettes:**
- Hello Darkness (general purpose)
- Population Blues (population data)
- Magma (high-contrast needs)
- Go Green (positive indicators)

### When to Use Divergent Palettes

Use divergent palettes when visualizing:
- Data with a meaningful midpoint (average, zero, threshold)
- Comparison to a baseline or target
- Positive vs negative values
- Change over time (increase/decrease)

**Recommended palettes:**
- Colorblind-Friendly (preferred for accessibility)
- Sunshine (general purpose)
- Hot and Cold (temperature, sentiment)
- Polar (contrasting concepts)

## Accessibility Considerations

### Color Blindness

- Prefer the Colorblind-Friendly divergent palette when using divergent schemes
- Avoid red-green combinations without additional visual cues
- Use texture or patterns in addition to color when possible
- Test visualizations with colorblind simulation tools

### Visual Clarity

- Ensure sufficient contrast between colors
- Use clear, readable fonts at appropriate sizes
- Avoid clutter and unnecessary elements
- Provide text alternatives for key insights

## Quality Checklist

Before finalizing any visualization, verify:

- [ ] Uses approved Fraym color palette
- [ ] Appropriate chart type for the data
- [ ] Clear, descriptive title and subtitle
- [ ] No vertical or rotated text
- [ ] Legend is clear and properly positioned
- [ ] Data labels are readable (if used)
- [ ] Source attribution included
- [ ] Appropriate precision for numbers
- [ ] Sufficient contrast and accessibility
- [ ] No unnecessary chart elements
- [ ] Consistent styling with other project visualizations

## Examples of Common Mistakes to Avoid

### Don't:
- ❌ Use default ggplot2 colors
- ❌ Include error bars unless specifically requested
- ❌ Rotate axis text vertically
- ❌ Use wide bars without gaps
- ❌ Use too many colors in a single chart
- ❌ Include unnecessary gridlines
- ❌ Use 3D effects or shadows
- ❌ Mix multiple color schemes in one visualization

### Do:
- ✅ Use Fraym color palettes
- ✅ Keep charts clean and simple
- ✅ Use horizontal text throughout
- ✅ Provide context in titles/subtitles
- ✅ Ensure accessibility
- ✅ Include data sources
- ✅ Test visualizations with actual users
- ✅ Maintain consistency across a project

## Implementation Notes

All Fraym color palettes and visualization functions are available in the [utils/visualization.R](../utils/visualization.R) utility file. Load these with:

```r
source("utils/source_all.R")
```

Access color palettes:
```r
# Single colors
FRAYM_COLORS$electric_blue
FRAYM_COLORS$teal

# Sequential palettes
FRAYM_PALETTES$sequential$hello_darkness
FRAYM_PALETTES$sequential$magma

# Divergent palettes
FRAYM_PALETTES$divergent$colorblind_friendly
FRAYM_PALETTES$divergent$sunshine
```

For detailed function documentation, see [UTILITY_FUNCTIONS.md](UTILITY_FUNCTIONS.md).
